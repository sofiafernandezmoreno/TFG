\documentclass[a4paper,11pt]{book}

\usepackage{pgfgantt}
\usepackage{afterpage}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsmath}
\usepackage[spanish,es-tabla]{babel}
\usepackage[backend=bibtex8, sorting=none]{biblatex}
\usepackage{booktabs}
\usepackage{colortbl, longtable}
\usepackage{dcolumn}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage[stable]{footmisc}
\usepackage{graphicx}
\usepackage{hvfloat}
\usepackage[pdfborder={000}]{hyperref}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{pdfpages}
\usepackage{pgfgantt}
\usepackage{pgf-umlcd}
\usepackage{rotating}
\usepackage{url}
\usepackage{varwidth}
\usepackage{tocloft}
\usepackage{csvsimple}
\usepackage[spanish]{babel}
 \usepackage{capt-of}

\usepackage{xcolor}

\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\usetikzlibrary{babel}



\usepackage{siunitx}
\usepackage{tikz} % To generate the plot from csv
\usepackage{pgfplots}

\pgfplotsset{compat=newest} % Allows to place the legend below plot
\usepgfplotslibrary{units} % Allows to enter the units nicely

\sisetup{
	round-mode          = places,
	round-precision     = 2,
}

\decimalpoint
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother

\newenvironment{codigo}
 {\par\addvspace{\topsep}
  \centering
  \begin{minipage}{\linewidth}
  \hrule\kern2pt}
 {\par\kern2pt\hrule
  \end{minipage}
  \par\addvspace{\topsep}}

\RequirePackage{verbatim}



\newcommand{\myTitle}{Análisis y monitorización de aplicaciones a través de plugins con Naemon\xspace}
\newcommand{\myDegree}{Grado en Ingeniería Informática\xspace}
\newcommand{\myName}{Sofía Fernández Moreno\xspace}
\newcommand{\myProf}{Alberto Guillén Perales\xspace}
\newcommand{\myOtherProf}{Héctor Pomares Cintas\xspace}
\newcommand{\myFaculty}{Escuela Técnica Superior de Ingenierías Informática y de Telecomunicación\xspace}
\newcommand{\myFacultyShort}{E.T.S. de Ingenierías Informática y de Telecomunicación\xspace}
\newcommand{\myDepartment}{Departamento de Arquitectura y Tecnología de Computadores\xspace}
\newcommand{\myUni}{\protect{Universidad de Granada}\xspace}
\newcommand{\myLocation}{Granada\xspace}
\newcommand{\myTime}{\today\xspace}

\hypersetup{
  pdfauthor = {\myName (sofiafernandezmoreno@correo.ugr.es)},
  pdftitle = {\myTitle},
  pdfsubject = {},
  pdfkeywords = { monitorizacion , plugin, naemon },
  pdfcreator = {LaTeX},
  pdfproducer = {pdflatex}
}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[RO,LE]{\textbf{\thepage}}
\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}

\setlength{\headheight}{1.5\headheight}

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}

\lstset{ frame=Ltb,
  framerule=0.5pt,
  aboveskip=0.5cm,
  framextopmargin=3pt,
  framexbottommargin=3pt,
  framexleftmargin=0.1cm,
  framesep=0pt,
  rulesep=.4pt,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  stringstyle=\ttfamily,
  showstringspaces = false,
  basicstyle=\scriptsize\ttfamily,
  commentstyle=\color{gray45},
  keywordstyle=\bfseries,
  numbers=left,
  numbersep=6pt,
  numberstyle=\tiny,
  numberfirstline = false,
  breaklines=true,
}
 
% minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]{\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\newcommand{\bigrule}{\titlerule[0.5mm]}

%Para conseguir que en las páginas en blanco no ponga cabeceras
\makeatletter
\def\clearpage{
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother

\addbibresource{bibliografia.bib}

%Creación de nuevo comando paragraph
\setcounter{tocdepth}{6}
\setcounter{secnumdepth}{6}


\lstdefinelanguage{json}{
	basicstyle=\normalfont\ttfamily,
	numbers=left,
	numberstyle=\scriptsize,
	stepnumber=1,
	numbersep=8pt,
	showstringspaces=false,
	breaklines=true,
	frame=lines,
	backgroundcolor=\color{background},
	literate=
	*{0}{{{\color{numb}0}}}{1}
	{1}{{{\color{numb}1}}}{1}
	{2}{{{\color{numb}2}}}{1}
	{3}{{{\color{numb}3}}}{1}
	{4}{{{\color{numb}4}}}{1}
	{5}{{{\color{numb}5}}}{1}
	{6}{{{\color{numb}6}}}{1}
	{7}{{{\color{numb}7}}}{1}
	{8}{{{\color{numb}8}}}{1}
	{9}{{{\color{numb}9}}}{1}
	{:}{{{\color{punct}{:}}}}{1}
	{,}{{{\color{punct}{,}}}}{1}
	{\{}{{{\color{delim}{\{}}}}{1}
	{\}}{{{\color{delim}{\}}}}}{1}
	{[}{{{\color{delim}{[}}}}{1}
	{]}{{{\color{delim}{]}}}}{1},
}

\begin{document}
\input{portada/portada}
\input{prefacios/prefacio}
%\frontmatter
\tableofcontents
\listoftables
\listoffigures

%\mainmatter
%\setlength{\parskip}{5pt}
\setlength{\parindent}{4em}
\setlength{\parskip}{1em}

\input{capitulos/01_Introduccion}
\input{capitulos/03_Estado_arte}
\input{capitulos/04_Despliegue_Naemon_Contenedores}
\input{capitulos/05_Cargas}
\input{capitulos/06_Carga_Cliente}
\input{capitulos/07_Modelado}
\input{capitulos/08_Conclusiones}
\input{anexo/anexo.tex}
%\nocite{*}
\addcontentsline{toc}{chapter}{Bibliografía}
\printbibliography

%\appendix
%\input{apendices/manual_usuario/manual_usuario}
%\input{apendices/paper/paper}
%\input{glosario/entradas_glosario}
%\addcontentsline{toc}{chapter}{Anexo}

%\printglossary

\chapter*{}
\thispagestyle{empty}

\end{document}